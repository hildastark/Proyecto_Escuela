ALTER LOGIN SA ENABLE
GO
ALTER LOGIN SA WITH PASSWORD='SASA'
GO


CREATE DATABASE ESCUELANOMO
USE ESCUELANOMO

CREATE TABLE MATERIA(
CLAVE_M VARCHAR(7),
NOM_M VARCHAR (200),
CRED_M INT,
CONSTRAINT PK_CM PRIMARY KEY (CLAVE_M),
CHECK (CLAVE_M LIKE'MA-[A-Z][A-Z][0-9][0-9]'),
CHECK (CRED_M>0 AND CRED_M<=6))

INSERT INTO MATERIA VALUES('MA-MT52', 'DESARROLLO WEB',6)
INSERT INTO MATERIA VALUES('MA-PA63','PROGRMACION',4)
INSERT INTO MATERIA VALUES('MA-CF01','CALCULOS FINANCIEROS',3)

/*
DROP TABLE TABLA

REGLAS DE VALIDACION
CHECK
SINTAXIS:
CHECK (CAMPO VALIDACION)

OPERADORES 
LÓGICOS
RELACIONALES
ARITMETICOS
FUNCIONES

LIKE-->SIRVE PARA AUTOCOMPETAR CADENAS DE CARACTERES
[ ]


*/

CREATE TABLE HORARIO(
ID_H VARCHAR (4),
NOM_H VARCHAR (200),
CONSTRAINT PK_IH PRIMARY KEY (ID_H),
CHECK (ID_H LIKE '[0-9][0-9][0-9][A-Z]')
)

INSERT INTO HORARIO VALUES ('123M','MATUTINO')
INSERT INTO HORARIO VALUES('456V','VESPERTINO')

CREATE TABLE TIPOTELF(
ID_TT VARCHAR(4),
TIPO_T VARCHAR (100),
CONSTRAINT PK_IT PRIMARY KEY (ID_TT),
CHECK (ID_TT LIKE '[0-9][0-9][0-9][A-Z]')
)

INSERT INTO TIPOTELF VALUES ('123C','CELULAR')
INSERT INTO TIPOTELF VALUES ('456O','OFICINA')
INSERT INTO TIPOTELF VALUES ('789C','CASA')


CREATE TABLE CARRERA(
CLAVE_C VARCHAR(8),
NOM_C VARCHAR (200),
DUR_C INT,
CONSTRAINT PK_C PRIMARY KEY (CLAVE_C),
CHECK(CLAVE_C LIKE 'C-[0-9][A-Z]-[0-9][0-9][A-Z]'),
CHECK (DUR_C>0 AND DUR_C<=5)
)

INSERT INTO CARRERA VALUES ('C-1I-01I','INFORMATICA',3)
INSERT INTO CARRERA VALUES('C-2C-02C', 'COMERCIO INTERNACIONAL',1)
INSERT INTO CARRERA VALUES('C-3C-03C','CONTABILIDAD',2)

CREATE TABLE CALLE(
ID_CLL VARCHAR (6),
NOM_CLL VARCHAR (200),
CONSTRAINT PK_CLL PRIMARY KEY (ID_CLL),
CHECK (ID_CLL LIKE '[A-Z][A-Z]-[0-9][0-9][0-9]')
)

INSERT INTO CALLE VALUES ('BT-123', 'BUTURINI')
INSERT INTO CALLE VALUES('AY-456', 'AYUNTAMIENTO')
INSERT INTO CALLE VALUES ('EM-789','ENRICO MARTINEZ')

CREATE TABLE GENERO(
ID_G VARCHAR(4),
NOM_G VARCHAR (200),
CONSTRAINT PK_G PRIMARY KEY (ID_G),
CHECK (ID_G LIKE '[0-9][0-9][0-9][A-Z]')
)

INSERT INTO GENERO VALUES('123F','FEMENINO')
INSERT INTO GENERO VALUES('456M','MASCULINO')


 CREATE TABLE COLONIA(
 ID_COL VARCHAR (6),
 NOM_COL VARCHAR (100),
 CONSTRAINT PK_CL PRIMARY KEY (ID_COL),
 CHECK (ID_COL LIKE '[A-Z][A-Z]-[0-9][0-9][0-9]')
 )

 INSERT INTO COLONIA VALUES ('CE-001','CENTRO')
 INSERT INTO COLONIA VALUES ('DO-002','DOCTORES')
 INSERT INTO COLONIA VALUES('PO-003', 'POLANCO')


 CREATE TABLE DELMUN(
 ID_DM VARCHAR(6),
 NOM_DM VARCHAR (100),
 CONSTRAINT PK_DM PRIMARY KEY (ID_DM),
 CHECK(ID_DM LIKE '[A-Z][A-Z]-[0-9][0-9]'))

 

 INSERT INTO DELMUN VALUES( 'CU-01','CUAUHTEMOC')
 INSERT INTO DELMUN VALUES('VC-02','VENUSTIANO CARRANZA')
 INSERT INTO DELMUN VALUES('BJ-03','BENITO JUAREZ')


 CREATE TABLE ALUMNO(
 MATRICULA VARCHAR(9),
 NOM_A VARCHAR (150),
 FECHA_NA DATE,
 NUM_DIR INT,
 CURP_A VARCHAR (150),
 CLAVE_C1 VARCHAR(8),
 ID_DM1 VARCHAR (6),
 ID_COL1 VARCHAR (6),
 ID_CLL1 VARCHAR(6),
 ID_G1 VARCHAR(4),
 CONSTRAINT PK_M PRIMARY KEY (MATRICULA),
CONSTRAINT FK_CC1 FOREIGN KEY (CLAVE_C1) REFERENCES CARRERA (CLAVE_C) ON DELETE SET NULL,
CONSTRAINT FK_DM1 FOREIGN KEY (ID_DM1) REFERENCES DELMUN (ID_DM)ON DELETE SET NULL,
CONSTRAINT FK_COL1 FOREIGN KEY (ID_COL1) REFERENCES COLONIA (ID_COL)ON DELETE SET NULL,
CONSTRAINT FK_CLL1 FOREIGN KEY (ID_CLL1) REFERENCES CALLE (ID_CLL)ON DELETE SET NULL,
CONSTRAINT FK_G1 FOREIGN KEY (ID_G1) REFERENCES GENERO (ID_G)ON DELETE SET NULL,
CHECK (MATRICULA LIKE 'A-[0-9][0-9]-[A-Z]-[0-9][0-9]'),
CHECK(NUM_DIR>0)
)

SET DATEFORMAT DMY

INSERT INTO ALUMNO VALUES ('A-01-E-01','ERIKA BAUTISTA','28-04-1993',72,'EFT04','C-1I-01I','CU-01','CE-001','BT-123','123F')
INSERT INTO ALUMNO VALUES ('A-02-J-02','JASHAR PACHECO','14-09-1993',73,'AV485','C-2C-02C','VC-02','PO-003','AY-456','456M')
INSERT INTO ALUMNO VALUES ('A-03-P-03','PAULETT MARTINEZ','06-11-1996',74,'BR758','C-3C-03C','BJ-03','DO-002','EM-789','123F')


CREATE TABLE PROFESOR(
NUM_EMP VARCHAR(10),
NOM_P VARCHAR (100),
NUM_DOM_P INT,
CED_P INT,
ID_G2 VARCHAR(4),
ID_H1 VARCHAR(4),
ID_CLL2 VARCHAR(6),
ID_COL2 VARCHAR(6),
ID_DM2 VARCHAR(6),
CONSTRAINT PK_NE PRIMARY KEY (NUM_EMP),

CONSTRAINT FK_IG2 FOREIGN KEY (ID_G2) REFERENCES GENERO (ID_G)ON DELETE SET NULL,
CONSTRAINT FK_IH1 FOREIGN KEY (ID_H1) REFERENCES HORARIO (ID_H)ON DELETE SET NULL,
CONSTRAINT FK_IC2 FOREIGN KEY (ID_CLL2) REFERENCES CALLE (ID_CLL)ON DELETE SET NULL,
CONSTRAINT FK_CL2 FOREIGN KEY (ID_COL2) REFERENCES COLONIA (ID_COL)ON DELETE SET NULL,
CONSTRAINT FK_ID2 FOREIGN KEY (ID_DM2) REFERENCES DELMUN (ID_DM)ON DELETE SET NULL,
CHECK (NUM_EMP LIKE 'E-[0-9][0-9]-[A-Z]-[0-9][0-9]'),
CHECK(NUM_DOM_P>0)
)

INSERT INTO PROFESOR VALUES('E-01-J-23','JEROME ESTRADA',23, '123456', '456M','123M','BT-123','PO-003','CU-01')
INSERT INTO PROFESOR VALUES('E-02-F-24','FRANCISCO ZAMARRIPA',24, '123056','123F','456V','AY-456','DO-002','BJ-03')
INSERT INTO PROFESOR VALUES('E-03-B-25','BERNARDA VARGAS',25, '230546', '123F','123M','EM-789','CE-001','VC-02')


CREATE TABLE PROFTT(
ID_TT2 VARCHAR(4),
NUM_EMP1 VARCHAR(10),
NUM_TELFP INT,
CONSTRAINT FK_NE1 FOREIGN KEY (NUM_EMP1) REFERENCES PROFESOR (NUM_EMP)ON DELETE CASCADE,
CONSTRAINT FK_IT2 FOREIGN KEY (ID_TT2) REFERENCES TIPOTELF (ID_TT)ON DELETE CASCADE)

INSERT INTO PROFTT VALUES('123C','E-01-J-23',559852926)
INSERT INTO PROFTT VALUES('456O','E-02-F-24',565656566)
INSERT INTO PROFTT VALUES('789C','E-03-B-25',555959415)

CREATE TABLE ALUMTT(
MATRICULA1 VARCHAR(9),
ID_TT1 VARCHAR(4),
NUM_TELF INT,
CONSTRAINT FK_M1 FOREIGN KEY (MATRICULA1) REFERENCES ALUMNO (MATRICULA)ON DELETE CASCADE,
CONSTRAINT FK_IDT FOREIGN KEY (ID_TT1) REFERENCES TIPOTELF (ID_TT)ON DELETE CASCADE)

INSERT INTO ALUMTT VALUES('A-01-E-01','123C',55688561)
INSERT INTO ALUMTT VALUES('A-02-J-02','456O',55489125)
INSERT INTO ALUMTT VALUES('A-03-P-03','789C',55478513)

CREATE TABLE ALUMATE(
MATRICULA2 VARCHAR(9),
CLAVE_M1 VARCHAR(7),
CONSTRAINT FK_M2 FOREIGN KEY (MATRICULA2) REFERENCES ALUMNO (MATRICULA)ON DELETE CASCADE,
CONSTRAINT FK_CL1 FOREIGN KEY (CLAVE_M1) REFERENCES MATERIA (CLAVE_M)ON DELETE CASCADE)

INSERT INTO ALUMATE VALUES ('A-01-E-01','MA-MT52')
INSERT INTO ALUMATE VALUES('A-02-J-02','MA-PA63')
INSERT INTO ALUMATE VALUES('A-03-P-03','MA-CF01')

CREATE TABLE ALUMPROF(
NUMEMP3 VARCHAR(10),
MATRICULA3 VARCHAR(9),
CONSTRAINT FK_NE11 FOREIGN KEY (NUMEMP3) REFERENCES PROFESOR(NUM_EMP)ON DELETE CASCADE,
CONSTRAINT FK_MAT3 FOREIGN KEY (MATRICULA3) REFERENCES ALUMNO(MATRICULA)ON DELETE CASCADE)
DELETE ALUMPROF
INSERT INTO ALUMPROF VALUES('E-01-J-23','A-01-E-01')
INSERT INTO ALUMPROF VALUES('E-01-J-23','A-02-J-02')
INSERT INTO ALUMPROF VALUES('E-01-J-23','A-03-P-03')
INSERT INTO ALUMPROF VALUES('E-02-F-24','A-01-E-01')
INSERT INTO ALUMPROF VALUES('E-02-F-24','A-02-J-02')
INSERT INTO ALUMPROF VALUES('E-02-F-24','A-03-P-03')
INSERT INTO ALUMPROF VALUES('E-03-B-25','A-01-E-01')
INSERT INTO ALUMPROF VALUES('E-03-B-25','A-02-J-02')
INSERT INTO ALUMPROF VALUES('E-03-B-25','A-03-P-03')

ALTER AUTHORIZATION ON DATABASE:: ESCUELANOMO TO SA
/* PARA ELIMINAR CUALQUIER TABLA
DROP TABLE NOM TABLA*/

/*PROCEDIMIENTOS ALMACENADOS
ES UN CONJUNTO DE INSTRUCCIONES QUE SOBN PROGRMADOS PARA REALIZAR ALGUNA ACCION DENTRO DE LOS ELEMENTOS
DE LA ABSE DE DATOS.
DEFINIDOS POR SMDN-->YA SE ENCUENTRAN CREADOS
DEFINISOD POR EL PROGRMAMDOR--> LOS QUE SE VAN A PROGRAMAR

CREATE TABLE PROCEDURE
SINTAXIS:
CREATE PROCEDURE NOMBREPROC PARAMETROS
AS
BEGIN
INSTRUCCIONES
END

EJECUTAR UN PROCEDIMIENTO
SINTAXIS:
EXECUTE NOMBREPROC
EXEC NOMBREPROC

NOMBREPROC

DECLARAR VARIABLES EN SQL
SINTAXIS:

@NOMVAR TIPODATO

ELIMINAR 
DELETE
SINTAXIS:
DELETE 
FROM TABLA
WHERE CONDICION(ES)

TIPO DE ELIMINACION
ON DELETE CASCADE-->ELIMINACION EN CASCADA
ON DELETE SET-->ELIMINACION EN NULO

*/

CREATE PROCEDURE CONM
AS
BEGIN
SELECT *
FROM MATERIA
END

EXECUTE CONM

CONM


SELECT *
FROM ALUMNO

SELECT *
FROM PROFESOR

SELECT *
FROM TIPOTELF

SELECT MATRICULA,NOM_A, CURP_A 
FROM ALUMNO  

SELECT NUM_EMP, NOM_P, CED_P, ID_DM2
FROM PROFESOR

SELECT *
FROM HORARIO
WHERE NOM_H='MATUTINO'

SELECT *
FROM GENERO
WHERE NOM_G='FEMENINO'

SELECT *
FROM CARRERA
WHERE NOM_C='INFORMATICA'

SELECT *
FROM DELMUN
WHERE NOM_DM='POLANCO'

SELECT *
FROM TIPOTELF
WHERE TIPO_T='CASA'

SELECT MATRICULA2, MATRICULA
FROM ALUMATE INNER JOIN ALUMNO ON MATRICULA2=MATRICULA

/*CONEXIÓN CON JAVA*/
CREATE PROCEDURE C1
AS
BEGIN
SELECT *
FROM ALUMNO
END

CREATE PROCEDURE C2
AS
BEGIN
SELECT *
FROM CARRERA
END

CREATE PROCEDURE C3
AS
BEGIN
SELECT *
FROM CALLE
END

CREATE PROCEDURE C4
AS
BEGIN
SELECT *
FROM COLONIA
END

CREATE PROCEDURE C5
AS
BEGIN
SELECT *
FROM DELMUN
END

CREATE PROCEDURE C6
AS
BEGIN
SELECT *
FROM GENERO
END

CREATE PROCEDURE CON1
AS
BEGIN
SELECT MATRICULA, NOM_A,NOM_G, FECHA_NA, CURP_A, NOM_CLL, NOM_COL, NOM_DM, NOM_C
FROM ALUMNO INNER JOIN CALLE ON ID_CLL=ID_CLL1
INNER JOIN COLONIA ON ID_COL=ID_COL1
INNER JOIN DELMUN ON ID_DM=ID_DM1
INNER JOIN ALUMATE ON MATRICULA=MATRICULA2
INNER JOIN MATERIA ON CLAVE_M=CLAVE_M1
INNER JOIN CARRERA ON CLAVE_C=CLAVE_C1
INNER JOIN GENERO ON ID_G=ID_G1
END


CREATE PROCEDURE B1 @NA VARCHAR(100)
AS
BEGIN
SELECT MATRICULA, NOM_A,NOM_P
FROM PROFESOR INNER JOIN ALUMPROF
ON NUM_EMP=NUMEMP3
INNER JOIN ALUMNO ON
MATRICULA=MATRICULA3
WHERE NOM_A LIKE @NA+'%'
END

B1'A-01-E-01'

SELECT *
FROM CARRERA


CREATE PROCEDURE B2 @NA VARCHAR(100)
AS
BEGIN
SELECT MATRICULA,NOM_A,NOM_M
FROM ALUMNO INNER JOIN ALUMATE ON
MATRICULA=MATRICULA2 INNER JOIN MATERIA ON
CLAVE_M1=CLAVE_M
WHERE NOM_A LIKE @NA+'%'
END


CREATE PROCEDURE B3 @NA VARCHAR(100)
AS
BEGIN
SELECT MATRICULA,NOM_A,NOM_C
FROM ALUMNO INNER JOIN CARRERA ON
CLAVE_C=CLAVE_C1
WHERE NOM_A LIKE @NA+'%'
END

CREATE PROCEDURE B4 @C VARCHAR(100)
AS
BEGIN
SELECT *
FROM CARRERA
WHERE NOM_C LIKE @C+'%'
END

CREATE PROCEDURE B5 @C VARCHAR(100)
AS
BEGIN
SELECT *
FROM CALLE
WHERE NOM_CLL LIKE @C+'%'
END 

CREATE PROCEDURE B6 @C VARCHAR(100)
AS
BEGIN
SELECT *
FROM COLONIA
WHERE NOM_COL LIKE @C+'%'
END

CREATE PROCEDURE B7 @C VARCHAR(100)
AS
BEGIN
SELECT *
FROM DELMUN
WHERE NOM_DM LIKE @C+'%'
END 

CREATE PROCEDURE B8 @C VARCHAR(100)
AS
BEGIN
SELECT *
FROM GENERO
WHERE NOM_G LIKE @C+'%'
END

CREATE PROCEDURE CTAA
AS
BEGIN
SELECT MATRICULA,NOM_A,CURP_A
FROM ALUMNO
END

CREATE PROCEDURE CTAT
AS
BEGIN
SELECT *
FROM TIPOTELF
END

CREATE PROCEDURE CSTA
AS
BEGIN
SELECT *
FROM ALUMTT
END

CREATE PROCEDURE CCTA
AS
BEGIN
SELECT MATRICULA,NOM_A,NUM_TELF,TIPO_T
FROM ALUMNO INNER JOIN ALUMTT ON MATRICULA=MATRICULA1
INNER JOIN TIPOTELF ON ID_TT=ID_TT1
END

CREATE PROCEDURE B_TT @MAT VARCHAR(100)
AS
BEGIN
SELECT MATRICULA,NOM_A,NUM_TELF,TIPO_T
FROM ALUMNO INNER JOIN ALUMTT ON MATRICULA=MATRICULA1
INNER JOIN TIPOTELF ON ID_TT=ID_TT1
WHERE NOM_A LIKE @MAT+'%'
END

CREATE PROCEDURE B_TT2 @MAT VARCHAR(100)
AS
BEGIN
SELECT MATRICULA,NOM_A,NUM_TELF,TIPO_T
FROM ALUMNO INNER JOIN ALUMTT ON MATRICULA=MATRICULA1
INNER JOIN TIPOTELF ON ID_TT=ID_TT1
WHERE TIPO_T LIKE @MAT+'%'
END

CREATE PROCEDURE B_TT3 @MAT VARCHAR(100)
AS
BEGIN 
SELECT *
FROM TIPOTELF
WHERE TIPO_T LIKE @MAT+'%'
END

 CREATE PROCEDURE  INGA
 @MAT VARCHAR(9),@NA VARCHAR(150),@FN DATETIME,@ND INT,@CA VARCHAR(100),@CR VARCHAR(8),@CDM VARCHAR(6),
 @CCO VARCHAR(6),@CCL VARCHAR(6),@CG VARCHAR(4)
 AS
 BEGIN
 SET DATEFORMAT DMY
 INSERT INTO ALUMNO VALUES(UPPER(@MAT),UPPER(@NA),@FN,@ND,UPPER(@CA),UPPER(@CR),UPPER(@CDM),UPPER(@CCO),UPPER(@CCL),UPPER(@CG))
 END

 CREATE PROCEDURE CONTMAT
AS
BEGIN
SELECT *
FROM ALUMATE
END


CREATE PROCEDURE CONMATERIA
AS
BEGIN
SELECT *
FROM MATERIA
END

CREATE PROCEDURE CONMATALUM2
AS
BEGIN
SELECT MATRICULA, NOM_A, CURP_A, NOM_M, CRED_M
FROM ALUMNO INNER JOIN ALUMATE ON MATRICULA=MATRICULA2
INNER JOIN MATERIA ON CLAVE_M=CLAVE_M1
END

CREATE PROCEDURE BUSMATALUM  @BUS VARCHAR(100)
AS
BEGIN
SELECT MATRICULA, NOM_A, CURP_A, NOM_M, CRED_M
FROM ALUMNO INNER JOIN ALUMATE ON MATRICULA=MATRICULA2
INNER JOIN MATERIA ON CLAVE_M=CLAVE_M1
WHERE NOM_A LIKE @BUS+'%'
END

CREATE PROCEDURE BUSMATALUM2  @BUS VARCHAR(100)
AS
BEGIN
SELECT MATRICULA, NOM_A, CURP_A, NOM_M, CRED_M
FROM ALUMNO INNER JOIN ALUMATE ON MATRICULA=MATRICULA2
INNER JOIN MATERIA ON CLAVE_M=CLAVE_M1
WHERE NOM_M LIKE @BUS+'%'
END

CREATE PROCEDURE BUSMATERIA @NOM VARCHAR(100)
AS
BEGIN
SELECT*
FROM MATERIA
WHERE NOM_M LIKE @NOM+'%'
END

CREATE PROCEDURE INGCALLE
@ICL VARCHAR(6), @NCL VARCHAR(200)
AS
BEGIN
INSERT INTO CALLE VALUES (UPPER(@ICL), UPPER(@NCL))
END

CREATE PROCEDURE INGCOLONIA
@ICOL VARCHAR(6), @NCOL VARCHAR(100)
AS
BEGIN
INSERT INTO COLONIA VALUES (UPPER(@ICOL), UPPER(@NCOL))
END

CREATE PROCEDURE INGDELEGACION
@ID VARCHAR(6), @ND VARCHAR(100)
AS
BEGIN
INSERT INTO DELMUN VALUES (UPPER(@ID), UPPER(@ND))
END


CREATE PROCEDURE INGCARRERA
@CC VARCHAR(8), @NC VARCHAR(200), @DC INT
AS
BEGIN
INSERT INTO CARRERA VALUES (UPPER(@CC), UPPER(@NC), UPPER(@DC))
END


SELECT *
FROM CARRERA

CREATE PROCEDURE INGGENERO
@IG VARCHAR(4), @NG VARCHAR(200)
AS
BEGIN
INSERT INTO GENERO VALUES (UPPER(@IG), UPPER(@NG))
END

CREATE PROCEDURE INGTT
@IT VARCHAR(4), @TT VARCHAR(100)
AS
BEGIN
INSERT INTO TIPOTELF VALUES (UPPER(@IT), UPPER(@TT))
END

CREATE PROCEDURE INGTELFALUM 
@MA VARCHAR(9),@IDT VARCHAR(4),@NU INT 
AS
BEGIN
INSERT INTO ALUMTT VALUES (UPPER(@MA), UPPER(@IDT), @NU)
END 

CREATE PROCEDURE INALUMAT @CLAVE VARCHAR(9), @NOM VARCHAR (7)
AS
BEGIN
INSERT INTO ALUMATE VALUES (UPPER (@CLAVE), UPPER(@NOM))
END 

CREATE PROCEDURE INMATERIA @CLAVE VARCHAR(7), @NOM VARCHAR(200), @cred INT
AS
BEGIN
INSERT INTO MATERIA VALUES (UPPER (@CLAVE), UPPER(@NOM), @cred)
END
 
CREATE PROCEDURE ELIMCARR @CLAVEC VARCHAR (8)ASBEGINDELETEFROM CARRERAWHERE CLAVE_C=@CLAVECENDCREATE PROCEDURE ELIMALUM @MAT VARCHAR (9)ASBEGINDELETEFROM ALUMNOWHERE MATRICULA=@MATENDCREATE PROCEDURE ELIMCALLE @CALLE VARCHAR (6)ASBEGINDELETEFROM CALLEWHERE ID_CLL=@CALLE ENDCREATE PROCEDURE ELIMCOL @COL VARCHAR (6)ASBEGINDELETEFROM COLONIA WHERE ID_COL=@COLENDCREATE PROCEDURE ELIMDELM @DELMUN VARCHAR (6)ASBEGINDELETEFROM DELMUNWHERE ID_DM=@DELMUNENDCREATE PROCEDURE ELIMGEN @GENER VARCHAR (4)ASBEGINDELETE FROM GENEROWHERE ID_G=@GENERENDCREATE PROCEDURE ELIMMAT @MATER VARCHAR (7)ASBEGINDELETEFROM MATERIAWHERE CLAVE_M=@MATERENDCREATE PROCEDURE ELIMTTEL @TTEL VARCHAR (4)ASBEGINDELETEFROM TIPOTELFWHERE ID_TT=@TTELEND
SELECT *
FROM CARRERA


/*--------------------------------------*/
SELECT *
FROM ALUMATE INNER JOIN MATERIA ON CLAVE_M1=CLAVE_M 
INNER JOIN ALUMNO ON MATRICULA2=MATRICULA 
INNER JOIN CALLE ON id_cll1=id_cll 
INNER JOIN PROFESOR ON id_cll=id_cll2
 INNER JOIN HORARIO ON ID_H1=ID_H

SELECT MATRICULA, NOM_A, NOM_CLL, NOM_M, NOM_P, NOM_H 
FROM ALUMATE INNER JOIN MATERIA ON CLAVE_M1=CLAVE_M 
INNER JOIN ALUMNO ON MATRICULA2=MATRICULA
 INNER JOIN CALLE ON id_cll1=id_cll 
 INNER JOIN PROFESOR ON id_cll=id_cll2 
 INNER JOIN HORARIO ON ID_H1=ID_H

SELECT MATRICULA, NOM_A, NOM_G
FROM ALUMNO INNER JOIN GENERO ON ID_G1 = ID_G

SELECT MATRICULA, NOM_A, NOM_C
FROM ALUMNO INNER JOIN CARRERA ON CLAVE_C = CLAVE_C1

SELECT *
FROM CARRERA INNER JOIN ALUMNO ON CLAVE_C=CLAVE_C1 
INNER JOIN ALUMATE ON MATRICULA=MATRICULA2
 INNER JOIN MATERIA ON CLAVE_M=CLAVE_M1 

SELECT *
FROM CARRERA INNER JOIN ALUMNO ON CLAVE_C=CLAVE_C1
 INNER JOIN GENERO ON ID_G=ID_G1 
 INNER JOIN PROFESOR ON ID_G2=ID_G 
 INNER JOIN DELMUN ON ID_DM2=ID_DM  

SELECT NUM_EMP, NOM_P, CED_P, ID_G2,ID_CLL2
FROM PROFESOR INNER JOIN CALLE ON ID_CLL=ID_CLL2
 INNER JOIN ALUMNO ON ID_CLL= ID_CLL1 
 INNER JOIN GENERO ON ID_G1=ID_G



CON1



CREATE PROCEDURE BUS1 @MAT INT
AS
BEGIN
SELECT MATRICULA, NOM_A, NOM_CLL, NOM_M, NOM_P, NOM_H 
FROM ALUMATE INNER JOIN MATERIA ON CLAVE_M1=CLAVE_M 
INNER JOIN ALUMNO ON MATRICULA2=MATRICULA
 INNER JOIN CALLE ON id_cll1=id_cll 
 INNER JOIN PROFESOR ON id_cll=id_cll2 
 INNER JOIN HORARIO ON ID_H1=ID_H
 WHERE MATRICULA=@MAT
 END
 BUS1 22


 CREATE PROCEDURE BUSAT @TT VARCHAR(50) 
 AS
 BEGIN
 SELECT MATRICULA,  NOM_P, NUM_TELF
FROM ALUMNO INNER JOIN ALUMTT ON MATRICULA=MATRICULA1 
INNER JOIN TIPOTELF ON ID_TT=ID_TT1 
INNER JOIN PROFTT ON ID_TT2=ID_TT 
INNER JOIN PROFESOR ON NUM_EMP=NUM_EMP1
WHERE TIPO_T=@TT
END

BUSAT CASA

CREATE PROCEDURE ALUMT
AS
BEGIN
SELECT MATRICULA, NOM_a, TIPO_T, NUM_TELF 
FROM ALUMNO INNER JOIN ALUMTT ON MATRICULA=MATRICULA1
INNER JOIN TIPOTELF ON ID_TT=ID_TT1
END

ALUMT

CREATE PROCEDURE BUS2 @NOMPROF VARCHAR(100)
AS
BEGIN
SELECT MATRICULA, NOM_A, NOM_C, NOM_M, NOM_H 
FROM ALUMATE INNER JOIN MATERIA ON CLAVE_M1=CLAVE_M 
INNER JOIN ALUMNO ON MATRICULA2=MATRICULA
 INNER JOIN CALLE ON id_cll1=id_cll 
 INNER JOIN PROFESOR ON id_cll=id_cll2 
 INNER JOIN HORARIO ON ID_H1=ID_H
 INNER JOIN ALUMPROF ON MATRICULA=MATRICULA3
 INNER JOIN CARRERA ON CLAVE_C=CLAVE_C1
 WHERE NOM_P=@NOMPROF
 END

BUS2 'BERNARDA VARGAS'

CREATE PROCEDURE BUS3 @NUM VARCHAR(100),@NH VARCHAR(200)
AS
BEGIN
SELECT MATRICULA, NOM_A, NOM_C, NOM_M, NOM_P
FROM ALUMATE INNER JOIN MATERIA ON CLAVE_M1=CLAVE_M 
INNER JOIN ALUMNO ON MATRICULA2=MATRICULA
 INNER JOIN CALLE ON id_cll1=id_cll 
 INNER JOIN PROFESOR ON id_cll=id_cll2 
 INNER JOIN HORARIO ON ID_H1=ID_H
 INNER JOIN ALUMPROF ON MATRICULA=MATRICULA3
 INNER JOIN CARRERA ON CLAVE_C=CLAVE_C1
 WHERE NOM_P=@NUM AND NOM_H=@NH
 END

 BUS3 'JEROME ESTRADA','MATUTINO'

 DELETE 
 FROM ALUMNO
 
 DELETE
 FROM MATERIA

  SELECT *
 FROM CARRERA

 SELECT *
 FROM ALUMNO

 UPDATE ALUMNO
 SET FECHA_NA='10-06-2001'
 WHERE MATRICULA='A-03-P-03'

 UPDATE ALUMNO
 SET NUM_DIR=234,ID_DM1='CU-01',ID_COL1='CE-001',ID_CLL1='BT-123'
 WHERE MATRICULA='A-03-P-03'

 SELECT *
 FROM MATERIA

 DELETE 
 FROM CARRERA
 WHERE CLAVE_C=4

 SELECT *
 FROM ALUMATE

 SELECT *
 FROM MATERIA

 DELETE 
 FROM MATERIA
 WHERE CLAVE_M=3

 CREATE PROCEDURE ELIMC @CC VARCHAR(8)
 AS
 BEGIN
 DELETE
 FROM CARRERA
 WHERE CLAVE_C=@CC
 END

 ELIMC 'c-4m-04m'

 CREATE PROCEDURE INGC 
 @CC VARCHAR(8),@NC VARCHAR(200),@DC INT
 AS
 BEGIN
 INSERT INTO CARRERA VALUES(UPPER(@CC),UPPER(@NC),@DC)
 END

 INGC 'c-4m-04m','mecatronica',3
 

 CREATE PROCEDURE  INGA
 @MAT VARCHAR(9),@NA VARCHAR(150),@FN DATETIME,@ND INT,@CA VARCHAR(100),@CR VARCHAR(8),@CDM VARCHAR(6),
 @CCO VARCHAR(6),@CCL VARCHAR(6),@CG VARCHAR(4)
 AS
 BEGIN
 SET DATEFORMAT DMY
 INSERT INTO ALUMNO VALUES(UPPER(@MAT),UPPER(@NA),@FN,@ND,UPPER(@CA),UPPER(@CR),UPPER(@CDM),UPPER(@CCO),UPPER(@CCL),UPPER(@CG))
 END
 
 INGA 'A-04-G-04','GRISLEDA SANDOVAL','10-05-2001',456,'gris4535','c-4m-04m','bj-03','po-003','AY-456','123f'

 CREATE PROCEDURE ACTC
 @CC VARCHAR(8),@NC VARCHAR(200),@DC INT
 AS
 BEGIN
 UPDATE CARRERA
 SET NOM_C=UPPER(@NC),DUR_C=@DC
 WHERE CLAVE_C=@CC
 END

 ACTC 'C-2C-02C','NEGOCIOS INTERNACIONALES',3

 CREATE PROCEDURE ACTA
 @MAT VARCHAR(9),@NA VARCHAR(150),@FN DATETIME,@ND INT,@CA VARCHAR(100),@CR VARCHAR(8),@CDM VARCHAR(6),@CCO VARCHAR(6),@CCL VARCHAR(6),@CG VARCHAR(4)
 AS
 BEGIN
 SET DATEFORMAT DMY
 UPDATE ALUMNO
 SET NOM_A=UPPER(@NA),FECHA_NA=@FN,
 NUM_DIR=@ND,CURP_A=UPPER(@CA),CLAVE_C1=UPPER(@CR),
 ID_DM1=UPPER(@CDM),ID_COL1=UPPER(@CCO),ID_CLL1=UPPER(@CCL),ID_G1=UPPER(@CG)
 WHERE MATRICULA=@MAT
 END

 ACTA 'A-01-E-01','lolita ayala','03-03-2002',72,'LOLIS89','C-1I-01I','CU-01','CE-001','bt-123','123f'

 /*FUNCION
 CONVIERTE UNA CADENA DE CARACERES EN MAYUSCULAS
 UPPER
 SINTAXIS:
 UPPER(CADENA DE CARACTERES)

 ACTUALIZAR
 UPTADE
 SINTAXIS:
 UPTADE TABLA
 SET  VALORES A ACTUALIZAR
 WHERE CONDICION(ES)

 */